package com.bytezone.wizardry.data;

import java.util.ArrayList;
import java.util.List;

// ---------------------------------------------------------------------------------//
public class Message
// ---------------------------------------------------------------------------------//
{
  private List<Location> locations = new ArrayList<> ();
  private List<String> messageLines = new ArrayList<> ();
  private int messageId;

  // ---------------------------------------------------------------------------------//
  public Message (int id)
  // ---------------------------------------------------------------------------------//
  {
    this.messageId = id;
  }

  // ---------------------------------------------------------------------------------//
  void addLine (MessageLine messageLine)
  // ---------------------------------------------------------------------------------//
  {
    messageLines.add (messageLine.text);
  }

  // ---------------------------------------------------------------------------------//
  void addLine (String messageLine)
  // ---------------------------------------------------------------------------------//
  {
    messageLines.add (messageLine);
  }

  // ---------------------------------------------------------------------------------//
  void addLocations (List<Location> locations)
  // ---------------------------------------------------------------------------------//
  {
    this.locations.addAll (locations);
  }

  // ---------------------------------------------------------------------------------//
  public List<Location> getLocations ()
  // ---------------------------------------------------------------------------------//
  {
    return locations;
  }

  // ---------------------------------------------------------------------------------//
  public int getTotalLocations ()
  // ---------------------------------------------------------------------------------//
  {
    return locations.size ();
  }

  // ---------------------------------------------------------------------------------//
  public int getId ()
  // ---------------------------------------------------------------------------------//
  {
    return messageId;
  }

  // ---------------------------------------------------------------------------------//
  public String getText ()
  // ---------------------------------------------------------------------------------//
  {
    StringBuilder text = new StringBuilder ();

    for (String line : messageLines)
    {
      text.append (line.startsWith ("^") ? line.substring (1) : line);
      text.append ("\n");
    }

    text.deleteCharAt (text.length () - 1);

    return text.toString ();
  }

  // ---------------------------------------------------------------------------------//
  @Override
  public String toString ()
  // ---------------------------------------------------------------------------------//
  {
    return String.format ("Message %d", messageId);
  }
}
